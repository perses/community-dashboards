{
  "kind": "PersesDashboard",
  "apiVersion": "perses.dev/v1alpha1",
  "metadata": {
    "name": "kubernetes-workload-ns-resources-overview",
    "namespace": "perses-dev",
    "creationTimestamp": null,
    "labels": {
      "app.kubernetes.io/component": "dashboard",
      "app.kubernetes.io/instance": "kubernetes-workload-ns-resources-overview",
      "app.kubernetes.io/name": "perses-dashboard",
      "app.kubernetes.io/part-of": "perses-operator"
    }
  },
  "spec": {
    "config": {
      "display": {
        "name": "Kubernetes / Compute Resources / Namespace (Workloads)"
      },
      "variables": [
        {
          "kind": "ListVariable",
          "spec": {
            "display": {
              "name": "cluster",
              "hidden": false
            },
            "allowAllValue": false,
            "allowMultiple": false,
            "plugin": {
              "kind": "PrometheusLabelValuesVariable",
              "spec": {
                "datasource": {
                  "kind": "PrometheusDatasource",
                  "name": "prometheus-datasource"
                },
                "labelName": "cluster",
                "matchers": [
                  "up{job=\"kubelet\", metrics_path=\"/metrics/cadvisor\"}"
                ]
              }
            },
            "name": "cluster"
          }
        },
        {
          "kind": "ListVariable",
          "spec": {
            "display": {
              "name": "namespace",
              "hidden": false
            },
            "allowAllValue": false,
            "allowMultiple": false,
            "plugin": {
              "kind": "PrometheusLabelValuesVariable",
              "spec": {
                "datasource": {
                  "kind": "PrometheusDatasource",
                  "name": "prometheus-datasource"
                },
                "labelName": "namespace",
                "matchers": [
                  "kube_namespace_status_phase{cluster=\"$cluster\",job=\"kube-state-metrics\"}"
                ]
              }
            },
            "name": "namespace"
          }
        },
        {
          "kind": "ListVariable",
          "spec": {
            "display": {
              "name": "workload_type",
              "hidden": false
            },
            "allowAllValue": false,
            "allowMultiple": false,
            "plugin": {
              "kind": "PrometheusLabelValuesVariable",
              "spec": {
                "datasource": {
                  "kind": "PrometheusDatasource",
                  "name": "prometheus-datasource"
                },
                "labelName": "workload_type",
                "matchers": [
                  "namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\"}"
                ]
              }
            },
            "name": "type"
          }
        }
      ],
      "panels": {
        "0_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "CPU Usage",
              "description": "Shows the CPU usage of the namespace by workload, and the CPU resource quota of the namespace."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "decimal"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 1,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate5m{cluster=\"$cluster\",namespace=\"$namespace\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)",
                      "seriesNameFormat": "{{workload}} - {{workload_type}}"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "scalar(\n  max(\n    kube_resourcequota{cluster=\"$cluster\",namespace=\"$namespace\",resource=\"requests.cpu\",type=\"hard\"}\n  )\n)",
                      "seriesNameFormat": "quota - requests"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "scalar(\n  max(kube_resourcequota{cluster=\"$cluster\",namespace=\"$namespace\",resource=\"limits.cpu\",type=\"hard\"})\n)",
                      "seriesNameFormat": "quota - limits"
                    }
                  }
                }
              }
            ]
          }
        },
        "1_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "CPU Quota",
              "description": "Shows the CPU requests, limits, and usage of workloads in a namespace in tabular format."
            },
            "plugin": {
              "kind": "Table",
              "spec": {
                "columnSettings": [
                  {
                    "name": "workload",
                    "header": "Workload",
                    "align": "left"
                  },
                  {
                    "name": "workload_type",
                    "header": "Type",
                    "align": "left"
                  },
                  {
                    "name": "value #1",
                    "header": "Running Pods",
                    "align": "right"
                  },
                  {
                    "name": "value #2",
                    "header": "CPU Usage",
                    "align": "right"
                  },
                  {
                    "name": "value #3",
                    "header": "CPU Requests",
                    "align": "right"
                  },
                  {
                    "name": "value #4",
                    "header": "CPU Requests %",
                    "align": "right"
                  },
                  {
                    "name": "value #5",
                    "header": "CPU Limits",
                    "align": "right"
                  },
                  {
                    "name": "value #6",
                    "header": "CPU Limits %",
                    "align": "right"
                  },
                  {
                    "name": "timestamp",
                    "hide": true
                  }
                ],
                "transforms": [
                  {
                    "kind": "MergeSeries",
                    "spec": {}
                  }
                ]
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "count by (workload, workload_type) (\n  namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate5m{cluster=\"$cluster\",namespace=\"$namespace\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    kube_pod_container_resource_requests{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"cpu\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "  sum by (workload, workload_type) (\n      node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate5m{cluster=\"$cluster\",namespace=\"$namespace\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n/\n  sum by (workload, workload_type) (\n      kube_pod_container_resource_requests{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"cpu\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    kube_pod_container_resource_limits{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"cpu\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "  sum by (workload, workload_type) (\n      node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate5m{cluster=\"$cluster\",namespace=\"$namespace\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n/\n  sum by (workload, workload_type) (\n      kube_pod_container_resource_limits{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"cpu\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )"
                    }
                  }
                }
              }
            ]
          }
        },
        "2_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Memory Usage",
              "description": "Shows the memory usage of the namespace by workload, and the memory resource quota of the namespace."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "bytes"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 1,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    container_memory_working_set_bytes{cluster=\"$cluster\",container!=\"\",image!=\"\",job=\"cadvisor\",namespace=\"$namespace\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)",
                      "seriesNameFormat": "{{workload}} - {{workload_type}}"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "scalar(\n  max(\n    kube_resourcequota{cluster=\"$cluster\",namespace=\"$namespace\",resource=~\"requests.memory|memory\",type=\"hard\"}\n  )\n)",
                      "seriesNameFormat": "quota - requests"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "scalar(\n  max(\n    kube_resourcequota{cluster=\"$cluster\",namespace=\"$namespace\",resource=~\"limits.memory\",type=\"hard\"}\n  )\n)",
                      "seriesNameFormat": "quota - limits"
                    }
                  }
                }
              }
            ]
          }
        },
        "3_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Memory Quota",
              "description": "Shows the memory requests, limits, and usage of workloads in a namespace in tabular format."
            },
            "plugin": {
              "kind": "Table",
              "spec": {
                "columnSettings": [
                  {
                    "name": "workload",
                    "header": "Workload",
                    "align": "left"
                  },
                  {
                    "name": "workload_type",
                    "header": "Type",
                    "align": "left"
                  },
                  {
                    "name": "value #1",
                    "header": "Running Pods",
                    "align": "right"
                  },
                  {
                    "name": "value #2",
                    "header": "Memory Usage",
                    "align": "right"
                  },
                  {
                    "name": "value #3",
                    "header": "Memory Requests",
                    "align": "right"
                  },
                  {
                    "name": "value #4",
                    "header": "Memory Requests %",
                    "align": "right"
                  },
                  {
                    "name": "value #5",
                    "header": "Memory Limits",
                    "align": "right"
                  },
                  {
                    "name": "value #6",
                    "header": "Memory Limits %",
                    "align": "right"
                  },
                  {
                    "name": "timestamp",
                    "hide": true
                  }
                ],
                "transforms": [
                  {
                    "kind": "MergeSeries",
                    "spec": {}
                  }
                ]
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "count by (workload, workload_type) (\n  namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    container_memory_working_set_bytes{cluster=\"$cluster\",container!=\"\",image!=\"\",job=\"cadvisor\",namespace=\"$namespace\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    kube_pod_container_resource_requests{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"memory\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "  sum by (workload, workload_type) (\n      container_memory_working_set_bytes{cluster=\"$cluster\",container!=\"\",image!=\"\",job=\"cadvisor\",namespace=\"$namespace\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n/\n  sum by (workload, workload_type) (\n      kube_pod_container_resource_requests{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"memory\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "sum by (workload, workload_type) (\n    kube_pod_container_resource_limits{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"memory\"}\n  * on (namespace, pod) group_left (workload, workload_type)\n    namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "  sum by (workload, workload_type) (\n      container_memory_working_set_bytes{cluster=\"$cluster\",container!=\"\",image!=\"\",job=\"cadvisor\",namespace=\"$namespace\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n/\n  sum by (workload, workload_type) (\n      kube_pod_container_resource_limits{cluster=\"$cluster\",job=\"kube-state-metrics\",namespace=\"$namespace\",resource=\"memory\"}\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )"
                    }
                  }
                }
              }
            ]
          }
        },
        "4_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Current Network Usage",
              "description": "Shows the current network usage of the namespace by workloads."
            },
            "plugin": {
              "kind": "Table",
              "spec": {
                "columnSettings": [
                  {
                    "name": "workload",
                    "header": "Workload",
                    "align": "left"
                  },
                  {
                    "name": "value #1",
                    "header": "Current Receive Bandwidth",
                    "align": "right"
                  },
                  {
                    "name": "value #2",
                    "header": "Current Transmit Bandwidth",
                    "align": "right"
                  },
                  {
                    "name": "value #3",
                    "header": "Rate of Received Packets",
                    "align": "right"
                  },
                  {
                    "name": "value #4",
                    "header": "Rate of Transmitted Packets",
                    "align": "right"
                  },
                  {
                    "name": "value #5",
                    "header": "Rate of Received Packets Dropped",
                    "align": "right"
                  },
                  {
                    "name": "value #6",
                    "header": "Rate of Transmitted Packets Dropped",
                    "align": "right"
                  },
                  {
                    "name": "timestamp",
                    "hide": true
                  }
                ],
                "transforms": [
                  {
                    "kind": "MergeSeries",
                    "spec": {}
                  }
                ]
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_receive_bytes_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_transmit_bytes_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_receive_packets_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_transmit_packets_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_receive_packets_dropped_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n)"
                    }
                  }
                }
              },
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_transmit_packets_dropped_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload_type=~\"$type\"}\n  )\n)"
                    }
                  }
                }
              }
            ]
          }
        },
        "5_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Receive Bandwidth",
              "description": "Shows the network receive bandwidth of the namespace by workload."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "bytes/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_receive_bytes_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "5_1": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Transmit Bandwidth",
              "description": "Shows the network transmit bandwidth of the namespace by workload."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "bytes/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_transmit_bytes_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "6_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Average Container Bandwidth by Workload: Received",
              "description": "Shows the average network bandwidth received in container by workload."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "bytes/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  avg by (workload) (\n      rate(\n        container_network_receive_bytes_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "6_1": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Average Container Bandwidth by Workload: Transmitted",
              "description": "Shows the average network bandwidth transmitted in container by workload."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "bytes/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  avg by (workload) (\n      rate(\n        container_network_transmit_bytes_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "7_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Rate of Received Packets",
              "description": "Shows the rate of received packets by pods in a workload in a namespace."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "packets/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_receive_packets_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "7_1": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Rate of Transmitted Packets",
              "description": "Shows the rate of transmitted packets by pods in a workload in a namespace."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "packets/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_transmit_packets_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "8_0": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Rate of Received Packets Dropped",
              "description": "Shows the rate of received packets droppedby pods in a workload in a namespace."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "packets/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_receive_packets_dropped_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        },
        "8_1": {
          "kind": "Panel",
          "spec": {
            "display": {
              "name": "Rate of Transmitted Packets Dropped",
              "description": "Shows the rate of transmitted packets dropped by pods in a workload in a namespace."
            },
            "plugin": {
              "kind": "TimeSeriesChart",
              "spec": {
                "legend": {
                  "position": "bottom",
                  "mode": "list",
                  "size": "small"
                },
                "yAxis": {
                  "format": {
                    "unit": "packets/sec"
                  }
                },
                "visual": {
                  "display": "line",
                  "lineWidth": 0.25,
                  "areaOpacity": 0.75,
                  "palette": {
                    "mode": "auto"
                  }
                }
              }
            },
            "queries": [
              {
                "kind": "TimeSeriesQuery",
                "spec": {
                  "plugin": {
                    "kind": "PrometheusTimeSeriesQuery",
                    "spec": {
                      "datasource": {
                        "kind": "PrometheusDatasource",
                        "name": "prometheus-datasource"
                      },
                      "query": "(\n  sum by (workload) (\n      rate(\n        container_network_transmit_packets_dropped_total{cluster=\"$cluster\",job=\"cadvisor\",namespace=\"$namespace\"}[$__rate_interval]\n      )\n    * on (namespace, pod) group_left (workload, workload_type)\n      namespace_workload_pod:kube_pod_owner:relabel{cluster=\"$cluster\",namespace=\"$namespace\",workload=~\".+\",workload_type=~\"$type\"}\n  )\n)",
                      "seriesNameFormat": "{{workload}}"
                    }
                  }
                }
              }
            ]
          }
        }
      },
      "layouts": [
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "CPU Usage"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/0_0"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "CPU Usage Quota"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 10,
                "content": {
                  "$ref": "#/spec/panels/1_0"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Memory Usage"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/2_0"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Memory Usage Quota"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 10,
                "content": {
                  "$ref": "#/spec/panels/3_0"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Network Usage"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 10,
                "content": {
                  "$ref": "#/spec/panels/4_0"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Bandwidth"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/5_0"
                }
              },
              {
                "x": 12,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/5_1"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Average Container Bandwidth"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/6_0"
                }
              },
              {
                "x": 12,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/6_1"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Rate of Packets"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/7_0"
                }
              },
              {
                "x": 12,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/7_1"
                }
              }
            ]
          }
        },
        {
          "kind": "Grid",
          "spec": {
            "display": {
              "title": "Rate of Packets Dropped"
            },
            "items": [
              {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/8_0"
                }
              },
              {
                "x": 12,
                "y": 0,
                "width": 12,
                "height": 8,
                "content": {
                  "$ref": "#/spec/panels/8_1"
                }
              }
            ]
          }
        }
      ],
      "duration": "1h"
    }
  },
  "status": {}
}